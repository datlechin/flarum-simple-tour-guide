/*! For license information please see forum.js.LICENSE.txt */
(()=>{var t={648:(t,e,o)=>{var n=o(288).default;function r(){"use strict";t.exports=r=function(){return o},t.exports.__esModule=!0,t.exports.default=t.exports;var e,o={},i=Object.prototype,s=i.hasOwnProperty,a=Object.defineProperty||function(t,e,o){t[e]=o.value},l="function"==typeof Symbol?Symbol:{},c=l.iterator||"@@iterator",d=l.asyncIterator||"@@asyncIterator",p=l.toStringTag||"@@toStringTag";function u(t,e,o){return Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(e){u=function(t,e,o){return t[e]=o}}function v(t,e,o,n){var r=e&&e.prototype instanceof x?e:x,i=Object.create(r.prototype),s=new M(n||[]);return a(i,"_invoke",{value:B(t,o,s)}),i}function h(t,e,o){try{return{type:"normal",arg:t.call(e,o)}}catch(t){return{type:"throw",arg:t}}}o.wrap=v;var f="suspendedStart",m="suspendedYield",g="executing",y="completed",w={};function x(){}function b(){}function _(){}var L={};u(L,c,(function(){return this}));var E=Object.getPrototypeOf,C=E&&E(E(H([])));C&&C!==i&&s.call(C,c)&&(L=C);var P=_.prototype=x.prototype=Object.create(L);function k(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function o(r,i,a,l){var c=h(t[r],t,i);if("throw"!==c.type){var d=c.arg,p=d.value;return p&&"object"==n(p)&&s.call(p,"__await")?e.resolve(p.__await).then((function(t){o("next",t,a,l)}),(function(t){o("throw",t,a,l)})):e.resolve(p).then((function(t){d.value=t,a(d)}),(function(t){return o("throw",t,a,l)}))}l(c.arg)}var r;a(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,r){o(t,n,e,r)}))}return r=r?r.then(i,i):i()}})}function B(t,o,n){var r=f;return function(i,s){if(r===g)throw new Error("Generator is already running");if(r===y){if("throw"===i)throw s;return{value:e,done:!0}}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var l=$(a,n);if(l){if(l===w)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=g;var c=h(t,o,n);if("normal"===c.type){if(r=n.done?y:m,c.arg===w)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=y,n.method="throw",n.arg=c.arg)}}}function $(t,o){var n=o.method,r=t.iterator[n];if(r===e)return o.delegate=null,"throw"===n&&t.iterator.return&&(o.method="return",o.arg=e,$(t,o),"throw"===o.method)||"return"!==n&&(o.method="throw",o.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var i=h(r,t.iterator,o.arg);if("throw"===i.type)return o.method="throw",o.arg=i.arg,o.delegate=null,w;var s=i.arg;return s?s.done?(o[t.resultName]=s.value,o.next=t.nextLoc,"return"!==o.method&&(o.method="next",o.arg=e),o.delegate=null,w):s:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,w)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function H(t){if(t||""===t){var o=t[c];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function o(){for(;++r<t.length;)if(s.call(t,r))return o.value=t[r],o.done=!1,o;return o.value=e,o.done=!0,o};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=_,a(P,"constructor",{value:_,configurable:!0}),a(_,"constructor",{value:b,configurable:!0}),b.displayName=u(_,p,"GeneratorFunction"),o.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},o.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,p,"GeneratorFunction")),t.prototype=Object.create(P),t},o.awrap=function(t){return{__await:t}},k(S.prototype),u(S.prototype,d,(function(){return this})),o.AsyncIterator=S,o.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var s=new S(v(t,e,n,r),i);return o.isGeneratorFunction(e)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},k(P),u(P,p,"Generator"),u(P,c,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),o.keys=function(t){var e=Object(t),o=[];for(var n in e)o.push(n);return o.reverse(),function t(){for(;o.length;){var n=o.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},o.values=H,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var o in this)"t"===o.charAt(0)&&s.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var o=this;function n(n,r){return a.type="throw",a.arg=t,o.next=n,r&&(o.method="next",o.arg=e),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=s.call(i,"catchLoc"),c=s.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=t,i.arg=e,r?(this.method="next",this.next=r.finallyLoc,w):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),w},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),T(o),w}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc===t){var n=o.completion;if("throw"===n.type){var r=n.arg;T(o)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,o,n){return this.delegate={iterator:H(t),resultName:o,nextLoc:n},"next"===this.method&&(this.arg=e),w}},o}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},288:t=>{function e(o){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(o)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},357:(t,e,o)=>{var n=o(648)();t.exports=n;try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}},e={};function o(n){var r=e[n];if(void 0!==r)return r.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,o),i.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};(()=>{"use strict";o.r(n),o.d(n,{extend:()=>l});const t=flarum.core.compat["common/extenders"];var e=o.n(t);function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}const i=flarum.core.compat["common/Model"];var s=o.n(i),a=function(t){var e,o;function n(){return t.apply(this,arguments)||this}o=t,(e=n).prototype=Object.create(o.prototype),e.prototype.constructor=e,r(e,o);var i=n.prototype;return i.title=function(){return s().attribute("title").call(this)},i.description=function(){return s().attribute("description").call(this)},i.target=function(){return s().attribute("target").call(this)},n}(s());const l=[(new(e().Store)).add("tour-guide-steps",a)];function c(t,e,o,n,r,i,s){try{var a=t[i](s),l=a.value}catch(t){return void o(t)}a.done?e(l):Promise.resolve(l).then(n,r)}function d(t){return function(){var e=this,o=arguments;return new Promise((function(n,r){var i=t.apply(e,o);function s(t){c(i,n,r,s,a,"next",t)}function a(t){c(i,n,r,s,a,"throw",t)}s(void 0)}))}}var p=o(357),u=o.n(p);const v=flarum.core.compat["forum/app"];var h=o.n(v);let f={};function m(t={}){f={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...t}}function g(t){return t?f[t]:f}function y(t,e,o,n){return(t/=n/2)<1?o/2*t*t+e:-o/2*(--t*(t-2)-1)+e}function w(t){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return t.flatMap((t=>{const o=t.matches(e),n=Array.from(t.querySelectorAll(e));return[...o?[t]:[],...n]})).filter((t=>"none"!==getComputedStyle(t).pointerEvents&&function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}(t)))}function x(t){if(!t||function(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}(t))return;const e=g("smoothScroll");t.scrollIntoView({behavior:!e||b(t)?"auto":"smooth",inline:"center",block:"center"})}function b(t){if(!t||!t.parentElement)return;const e=t.parentElement;return e.scrollHeight>e.clientHeight}let _={};function L(t,e){_[t]=e}function E(t){return t?_[t]:_}function C(){_={}}let P={};function k(t,e){P[t]=e}function S(t){var e;null==(e=P[t])||e.call(P)}function B(t){if(!t)return;const e=t.getBoundingClientRect(),o={x:e.x,y:e.y,width:e.width,height:e.height};L("__activeStagePosition",o),$(o)}function $(t){const e=E("__overlaySvg");if(!e)return void function(t){const e=function(t){const e=window.innerWidth,o=window.innerHeight,n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.classList.add("driver-overlay","driver-overlay-animated"),n.setAttribute("viewBox",`0 0 ${e} ${o}`),n.setAttribute("xmlSpace","preserve"),n.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),n.setAttribute("version","1.1"),n.setAttribute("preserveAspectRatio","xMinYMin slice"),n.style.fillRule="evenodd",n.style.clipRule="evenodd",n.style.strokeLinejoin="round",n.style.strokeMiterlimit="2",n.style.zIndex="10000",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%";const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",A(t)),r.style.fill=g("overlayColor")||"rgb(0,0,0)",r.style.opacity=`${g("overlayOpacity")}`,r.style.pointerEvents="auto",r.style.cursor="auto",n.appendChild(r),n}(t);document.body.appendChild(e),N(e,(t=>{"path"===t.target.tagName&&S("overlayClick")})),L("__overlaySvg",e)}(t);const o=e.firstElementChild;if("path"!==(null==o?void 0:o.tagName))throw new Error("no path element found in stage svg");o.setAttribute("d",A(t))}function A(t){const e=window.innerWidth,o=window.innerHeight,n=g("stagePadding")||0,r=g("stageRadius")||0,i=t.width+2*n,s=t.height+2*n,a=Math.min(r,i/2,s/2),l=Math.floor(Math.max(a,0)),c=i-2*l,d=s-2*l;return`M${e},0L0,0L0,${o}L${e},${o}L${e},0Z\n    M${t.x-n+l},${t.y-n} h${c} a${l},${l} 0 0 1 ${l},${l} v${d} a${l},${l} 0 0 1 -${l},${l} h-${c} a${l},${l} 0 0 1 -${l},-${l} v-${d} a${l},${l} 0 0 1 ${l},-${l} z`}function T(t){const{element:e}=t;let o="string"==typeof e?document.querySelector(e):e;o||(o=function(){const t=document.getElementById("driver-dummy-element");if(t)return t;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}()),function(t,e){const o=Date.now(),n=E("__activeStep"),r=E("__activeElement")||t,i=!r||r===t,s="driver-dummy-element"===t.id,a="driver-dummy-element"===r.id,l=g("animate"),c=e.onHighlightStarted||g("onHighlightStarted"),d=(null==e?void 0:e.onHighlighted)||g("onHighlighted"),p=(null==n?void 0:n.onDeselected)||g("onDeselected"),u=g(),v=E();!i&&p&&p(a?void 0:r,n,{config:u,state:v}),c&&c(s?void 0:t,e,{config:u,state:v});const h=!i&&l;let f=!1;(function(){const t=E("popover");t&&(t.wrapper.style.display="none")})(),L("previousStep",n),L("previousElement",r),L("activeStep",e),L("activeElement",t);const m=()=>{if(E("__transitionCallback")!==m)return;const i=Date.now()-o,a=400-i<=200;e.popover&&a&&!f&&h&&(I(t,e),f=!0),g("animate")&&i<400?function(t,e,o,n){let r=E("__activeStagePosition");const i=r||o.getBoundingClientRect(),s=n.getBoundingClientRect();r={x:y(t,i.x,s.x-i.x,e),y:y(t,i.y,s.y-i.y,e),width:y(t,i.width,s.width-i.width,e),height:y(t,i.height,s.height-i.height,e)},$(r),L("__activeStagePosition",r)}(i,400,r,t):(B(t),d&&d(s?void 0:t,e,{config:g(),state:E()}),L("__transitionCallback",void 0),L("__previousStep",n),L("__previousElement",r),L("__activeStep",e),L("__activeElement",t)),window.requestAnimationFrame(m)};L("__transitionCallback",m),window.requestAnimationFrame(m),x(t),!h&&e.popover&&I(t,e),r.classList.remove("driver-active-element","driver-no-interaction"),r.removeAttribute("aria-haspopup"),r.removeAttribute("aria-expanded"),r.removeAttribute("aria-controls"),g("disableActiveInteraction")&&t.classList.add("driver-no-interaction"),t.classList.add("driver-active-element"),t.setAttribute("aria-haspopup","dialog"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-controls","driver-popover-content")}(o,t)}function M(){const t=E("__activeElement"),e=E("__activeStep");t&&(B(t),function(){const t=E("__activeStagePosition"),e=E("__overlaySvg");if(!t)return;if(!e)return void console.warn("No stage svg found.");const o=window.innerWidth,n=window.innerHeight;e.setAttribute("viewBox",`0 0 ${o} ${n}`)}(),z(t,e))}function H(){const t=E("__resizeTimeout");t&&window.cancelAnimationFrame(t),L("__resizeTimeout",window.requestAnimationFrame(M))}function D(t){var e;if(!E("isInitialized")||"Tab"!==t.key&&9!==t.keyCode)return;const o=E("__activeElement"),n=null==(e=E("popover"))?void 0:e.wrapper,r=w([...n?[n]:[],...o?[o]:[]]),i=r[0],s=r[r.length-1];if(t.preventDefault(),t.shiftKey){const t=r[r.indexOf(document.activeElement)-1]||s;null==t||t.focus()}else{const t=r[r.indexOf(document.activeElement)+1]||i;null==t||t.focus()}}function O(t){var e;(null==(e=g("allowKeyboardControl"))||e)&&("Escape"===t.key?S("escapePress"):"ArrowRight"===t.key?S("arrowRightPress"):"ArrowLeft"===t.key&&S("arrowLeftPress"))}function N(t,e,o){const n=(e,n)=>{const r=e.target;t.contains(r)&&((!o||o(r))&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),null==n||n(e))};document.addEventListener("pointerdown",n,!0),document.addEventListener("mousedown",n,!0),document.addEventListener("pointerup",n,!0),document.addEventListener("mouseup",n,!0),document.addEventListener("click",(t=>{n(t,e)}),!0)}function I(t,e){var o,n;let r=E("popover");r&&document.body.removeChild(r.wrapper),r=function(){const t=document.createElement("div");t.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const o=document.createElement("header");o.id="driver-popover-title",o.classList.add("driver-popover-title"),o.style.display="none",o.innerText="Popover Title";const n=document.createElement("div");n.id="driver-popover-description",n.classList.add("driver-popover-description"),n.style.display="none",n.innerText="Popover description is here";const r=document.createElement("button");r.type="button",r.classList.add("driver-popover-close-btn"),r.setAttribute("aria-label","Close"),r.innerHTML="&times;";const i=document.createElement("footer");i.classList.add("driver-popover-footer");const s=document.createElement("span");s.classList.add("driver-popover-progress-text"),s.innerText="";const a=document.createElement("span");a.classList.add("driver-popover-navigation-btns");const l=document.createElement("button");l.type="button",l.classList.add("driver-popover-prev-btn"),l.innerHTML="&larr; Previous";const c=document.createElement("button");return c.type="button",c.classList.add("driver-popover-next-btn"),c.innerHTML="Next &rarr;",a.appendChild(l),a.appendChild(c),i.appendChild(s),i.appendChild(a),t.appendChild(r),t.appendChild(e),t.appendChild(o),t.appendChild(n),t.appendChild(i),{wrapper:t,arrow:e,title:o,description:n,footer:i,previousButton:l,nextButton:c,closeButton:r,footerButtons:a,progress:s}}(),document.body.appendChild(r.wrapper);const{title:i,description:s,showButtons:a,disableButtons:l,showProgress:c,nextBtnText:d=g("nextBtnText")||"Next &rarr;",prevBtnText:p=g("prevBtnText")||"&larr; Previous",progressText:u=g("progressText")||"{current} of {total}"}=e.popover||{};r.nextButton.innerHTML=d,r.previousButton.innerHTML=p,r.progress.innerHTML=u,i?(r.title.innerHTML=i,r.title.style.display="block"):r.title.style.display="none",s?(r.description.innerHTML=s,r.description.style.display="block"):r.description.style.display="none";const v=a||g("showButtons"),h=c||g("showProgress")||!1,f=(null==v?void 0:v.includes("next"))||(null==v?void 0:v.includes("previous"))||h;r.closeButton.style.display=v.includes("close")?"block":"none",f?(r.footer.style.display="flex",r.progress.style.display=h?"block":"none",r.nextButton.style.display=v.includes("next")?"block":"none",r.previousButton.style.display=v.includes("previous")?"block":"none"):r.footer.style.display="none";const m=l||g("disableButtons")||[];null!=m&&m.includes("next")&&(r.nextButton.disabled=!0,r.nextButton.classList.add("driver-popover-btn-disabled")),null!=m&&m.includes("previous")&&(r.previousButton.disabled=!0,r.previousButton.classList.add("driver-popover-btn-disabled")),null!=m&&m.includes("close")&&(r.closeButton.disabled=!0,r.closeButton.classList.add("driver-popover-btn-disabled"));const y=r.wrapper;y.style.display="block",y.style.left="",y.style.top="",y.style.bottom="",y.style.right="",y.id="driver-popover-content",y.setAttribute("role","dialog"),y.setAttribute("aria-labelledby","driver-popover-title"),y.setAttribute("aria-describedby","driver-popover-description"),r.arrow.className="driver-popover-arrow";const b=(null==(o=e.popover)?void 0:o.popoverClass)||g("popoverClass")||"";y.className=`driver-popover ${b}`.trim(),N(r.wrapper,(o=>{var n,r,i;const s=o.target,a=(null==(n=e.popover)?void 0:n.onNextClick)||g("onNextClick"),l=(null==(r=e.popover)?void 0:r.onPrevClick)||g("onPrevClick"),c=(null==(i=e.popover)?void 0:i.onCloseClick)||g("onCloseClick");return s.classList.contains("driver-popover-next-btn")?a?a(t,e,{config:g(),state:E()}):S("nextClick"):s.classList.contains("driver-popover-prev-btn")?l?l(t,e,{config:g(),state:E()}):S("prevClick"):s.classList.contains("driver-popover-close-btn")?c?c(t,e,{config:g(),state:E()}):S("closeClick"):void 0}),(t=>!(null!=r&&r.description.contains(t))&&!(null!=r&&r.title.contains(t))&&"string"==typeof t.className&&t.className.includes("driver-popover"))),L("popover",r);const _=(null==(n=e.popover)?void 0:n.onPopoverRender)||g("onPopoverRender");_&&_(r,{config:g(),state:E()}),z(t,e),x(y);const C=w([y,...t.classList.contains("driver-dummy-element")?[]:[t]]);C.length>0&&C[0].focus()}function W(){const t=E("popover");if(null==t||!t.wrapper)return;const e=t.wrapper.getBoundingClientRect(),o=g("stagePadding")||0,n=g("popoverOffset")||0;return{width:e.width+o+n,height:e.height+o+n,realWidth:e.width,realHeight:e.height}}function j(t,e){const{elementDimensions:o,popoverDimensions:n,popoverPadding:r,popoverArrowDimensions:i}=e;return"start"===t?Math.max(Math.min(o.top-r,window.innerHeight-n.realHeight-i.width),i.width):"end"===t?Math.max(Math.min(o.top-(null==n?void 0:n.realHeight)+o.height+r,window.innerHeight-(null==n?void 0:n.realHeight)-i.width),i.width):"center"===t?Math.max(Math.min(o.top+o.height/2-(null==n?void 0:n.realHeight)/2,window.innerHeight-(null==n?void 0:n.realHeight)-i.width),i.width):0}function R(t,e){const{elementDimensions:o,popoverDimensions:n,popoverPadding:r,popoverArrowDimensions:i}=e;return"start"===t?Math.max(Math.min(o.left-r,window.innerWidth-n.realWidth-i.width),i.width):"end"===t?Math.max(Math.min(o.left-(null==n?void 0:n.realWidth)+o.width+r,window.innerWidth-(null==n?void 0:n.realWidth)-i.width),i.width):"center"===t?Math.max(Math.min(o.left+o.width/2-(null==n?void 0:n.realWidth)/2,window.innerWidth-(null==n?void 0:n.realWidth)-i.width),i.width):0}function z(t,e){const o=E("popover");if(!o)return;const{align:n="start",side:r="left"}=(null==e?void 0:e.popover)||{},i=n,s="driver-dummy-element"===t.id?"over":r,a=g("stagePadding")||0,l=W(),c=o.arrow.getBoundingClientRect(),d=t.getBoundingClientRect(),p=d.top-l.height;let u=p>=0;const v=window.innerHeight-(d.bottom+l.height);let h=v>=0;const f=d.left-l.width;let m=f>=0;const y=window.innerWidth-(d.right+l.width);let w=y>=0;const x=!(u||h||m||w);let b=s;if("top"===s&&u?w=m=h=!1:"bottom"===s&&h?w=m=u=!1:"left"===s&&m?w=u=h=!1:"right"===s&&w&&(m=u=h=!1),"over"===s){const t=window.innerWidth/2-l.realWidth/2,e=window.innerHeight/2-l.realHeight/2;o.wrapper.style.left=`${t}px`,o.wrapper.style.right="auto",o.wrapper.style.top=`${e}px`,o.wrapper.style.bottom="auto"}else if(x){const t=window.innerWidth/2-(null==l?void 0:l.realWidth)/2,e=10;o.wrapper.style.left=`${t}px`,o.wrapper.style.right="auto",o.wrapper.style.bottom=`${e}px`,o.wrapper.style.top="auto"}else if(m){const t=Math.min(f,window.innerWidth-(null==l?void 0:l.realWidth)-c.width),e=j(i,{elementDimensions:d,popoverDimensions:l,popoverPadding:a,popoverArrowDimensions:c});o.wrapper.style.left=`${t}px`,o.wrapper.style.top=`${e}px`,o.wrapper.style.bottom="auto",o.wrapper.style.right="auto",b="left"}else if(w){const t=Math.min(y,window.innerWidth-(null==l?void 0:l.realWidth)-c.width),e=j(i,{elementDimensions:d,popoverDimensions:l,popoverPadding:a,popoverArrowDimensions:c});o.wrapper.style.right=`${t}px`,o.wrapper.style.top=`${e}px`,o.wrapper.style.bottom="auto",o.wrapper.style.left="auto",b="right"}else if(u){const t=Math.min(p,window.innerHeight-l.realHeight-c.width);let e=R(i,{elementDimensions:d,popoverDimensions:l,popoverPadding:a,popoverArrowDimensions:c});o.wrapper.style.top=`${t}px`,o.wrapper.style.left=`${e}px`,o.wrapper.style.bottom="auto",o.wrapper.style.right="auto",b="top"}else if(h){const t=Math.min(v,window.innerHeight-(null==l?void 0:l.realHeight)-c.width);let e=R(i,{elementDimensions:d,popoverDimensions:l,popoverPadding:a,popoverArrowDimensions:c});o.wrapper.style.left=`${e}px`,o.wrapper.style.bottom=`${t}px`,o.wrapper.style.top="auto",o.wrapper.style.right="auto",b="bottom"}x?o.arrow.classList.add("driver-popover-arrow-none"):function(t,e,o){const n=E("popover");if(!n)return;const r=o.getBoundingClientRect(),i=W(),s=n.arrow,a=i.width,l=window.innerWidth,c=r.width,d=r.left,p=i.height,u=window.innerHeight,v=r.top,h=r.height;s.className="driver-popover-arrow";let f=e,m=t;"top"===e?(d+c<=0?(f="right",m="end"):d+c-a<=0&&(f="top",m="start"),d>=l?(f="left",m="end"):d+a>=l&&(f="top",m="end")):"bottom"===e?(d+c<=0?(f="right",m="start"):d+c-a<=0&&(f="bottom",m="start"),d>=l?(f="left",m="start"):d+a>=l&&(f="bottom",m="end")):"left"===e?(v+h<=0?(f="bottom",m="end"):v+h-p<=0&&(f="left",m="start"),v>=u?(f="top",m="end"):v+p>=u&&(f="left",m="end")):"right"===e&&(v+h<=0?(f="bottom",m="start"):v+h-p<=0&&(f="right",m="start"),v>=u?(f="top",m="start"):v+p>=u&&(f="right",m="end")),f?(s.classList.add(`driver-popover-arrow-side-${f}`),s.classList.add(`driver-popover-arrow-align-${m}`)):s.classList.add("driver-popover-arrow-none")}(i,b,t)}function F(t={}){function e(){g("allowClose")&&l()}function o(){const t=E("activeIndex"),e=g("steps")||[];if(void 0===t)return;const o=t+1;e[o]?a(o):l()}function n(){const t=E("activeIndex"),e=g("steps")||[];if(void 0===t)return;const o=t-1;e[o]?a(o):l()}function r(){var t;if(E("__transitionCallback"))return;const e=E("activeIndex"),o=E("__activeStep"),r=E("__activeElement");if(void 0===e||void 0===o||void 0===E("activeIndex"))return;const i=(null==(t=o.popover)?void 0:t.onPrevClick)||g("onPrevClick");if(i)return i(r,o,{config:g(),state:E()});n()}function i(){var t;if(E("__transitionCallback"))return;const e=E("activeIndex"),n=E("__activeStep"),r=E("__activeElement");if(void 0===e||void 0===n)return;const i=(null==(t=n.popover)?void 0:t.onNextClick)||g("onNextClick");if(i)return i(r,n,{config:g(),state:E()});o()}function s(){E("isInitialized")||(L("isInitialized",!0),document.body.classList.add("driver-active",g("animate")?"driver-fade":"driver-simple"),window.addEventListener("keyup",O,!1),window.addEventListener("keydown",D,!1),window.addEventListener("resize",H),window.addEventListener("scroll",H),k("overlayClick",e),k("escapePress",e),k("arrowLeftPress",r),k("arrowRightPress",i))}function a(t=0){var e,o,n,r,i,s,c,d;const p=g("steps");if(!p)return console.error("No steps to drive through"),void l();if(!p[t])return void l();L("__activeOnDestroyed",document.activeElement),L("activeIndex",t);const u=p[t],v=p[t+1],h=p[t-1],f=(null==(e=u.popover)?void 0:e.doneBtnText)||g("doneBtnText")||"Done",m=g("allowClose"),y=void 0!==(null==(o=u.popover)?void 0:o.showProgress)?null==(n=u.popover)?void 0:n.showProgress:g("showProgress"),w=((null==(r=u.popover)?void 0:r.progressText)||g("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${t+1}`).replace("{{total}}",`${p.length}`),x=(null==(i=u.popover)?void 0:i.showButtons)||g("showButtons"),b=["next","previous",...m?["close"]:[]].filter((t=>!(null!=x&&x.length)||x.includes(t))),_=(null==(s=u.popover)?void 0:s.onNextClick)||g("onNextClick"),E=(null==(c=u.popover)?void 0:c.onPrevClick)||g("onPrevClick"),C=(null==(d=u.popover)?void 0:d.onCloseClick)||g("onCloseClick");T({...u,popover:{showButtons:b,nextBtnText:v?void 0:f,disableButtons:[...h?[]:["previous"]],showProgress:y,progressText:w,onNextClick:_||(()=>{v?a(t+1):l()}),onPrevClick:E||(()=>{a(t-1)}),onCloseClick:C||(()=>{l()}),...(null==u?void 0:u.popover)||{}}})}function l(t=!0){const e=E("__activeElement"),o=E("__activeStep"),n=E("__activeOnDestroyed"),r=g("onDestroyStarted");if(t&&r)return void r(e&&"driver-dummy-element"!==(null==e?void 0:e.id)?e:void 0,o,{config:g(),state:E()});const i=(null==o?void 0:o.onDeselected)||g("onDeselected"),s=g("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),window.removeEventListener("keyup",O),window.removeEventListener("resize",H),window.removeEventListener("scroll",H),function(){var t;const e=E("popover");e&&(null==(t=e.wrapper.parentElement)||t.removeChild(e.wrapper))}(),function(){var t;null==(t=document.getElementById("driver-dummy-element"))||t.remove(),document.querySelectorAll(".driver-active-element").forEach((t=>{t.classList.remove("driver-active-element","driver-no-interaction"),t.removeAttribute("aria-haspopup"),t.removeAttribute("aria-expanded"),t.removeAttribute("aria-controls")}))}(),function(){const t=E("__overlaySvg");t&&t.remove()}(),P={},C(),e&&o){const t="driver-dummy-element"===e.id;i&&i(t?void 0:e,o,{config:g(),state:E()}),s&&s(t?void 0:e,o,{config:g(),state:E()})}n&&n.focus()}return m(t),{isActive:()=>E("isInitialized")||!1,refresh:H,drive:(t=0)=>{s(),a(t)},setConfig:m,setSteps:t=>{C(),m({...g(),steps:t})},getConfig:g,getState:E,getActiveIndex:()=>E("activeIndex"),isFirstStep:()=>0===E("activeIndex"),isLastStep:()=>{const t=g("steps")||[],e=E("activeIndex");return void 0!==e&&e===t.length-1},getActiveStep:()=>E("activeStep"),getActiveElement:()=>E("activeElement"),getPreviousElement:()=>E("previousElement"),getPreviousStep:()=>E("previousStep"),moveNext:o,movePrevious:n,moveTo:function(t){(g("steps")||[])[t]?a(t):l()},hasNextStep:()=>{const t=g("steps")||[],e=E("activeIndex");return void 0!==e&&t[e+1]},hasPreviousStep:()=>{const t=g("steps")||[],e=E("activeIndex");return void 0!==e&&t[e-1]},highlight:t=>{s(),T({...t,popover:t.popover?{showButtons:[],showProgress:!1,progressText:"",...t.popover}:void 0})},destroy:()=>{l(!1)}}}const G=flarum.core.compat["common/utils/extractText"];var q=o.n(G);h().initializers.add("datlechin/flarum-simple-tour-guide",(function(){document.addEventListener("DOMContentLoaded",d(u().mark((function t(){var e,o,n,r,i,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=h().session.user)&&!e.attribute("tourGuideDismissedAt")){t.next=3;break}return t.abrupt("return");case 3:return o=[],t.next=6,h().store.find("tour-guide-steps").then((function(t){o=t}));case 6:n=function(){h().request({url:h().forum.attribute("apiUrl")+"/simple-tour-guide/dismiss",method:"POST"})},r=function(t,e){return void 0===e&&(e={}),q()(h().translator.trans("datlechin-simple-tour-guide.forum."+t,e))},i=function(t){return h().forum.attribute("datlechin-simple-tour-guide."+t)},s=function(){return o.map((function(t){return{element:t.target(),popover:{title:t.title(),description:t.description()}}}))},q(),F({showProgress:i("showProgress"),allowClose:i("allowClose"),smoothScroll:!0,overlayColor:"var(--overlay-bg)",progressText:r("progress_text",{current:"{{current}}",total:"{{total}}"}),showButtons:["next","previous"],nextBtnText:r("next_btn_text"),prevBtnText:r("prev_btn_text"),doneBtnText:r("done_btn_text"),steps:s(),onDestroyed:function(){n()}}).drive();case 13:case"end":return t.stop()}}),t)}))))}))})(),module.exports=n})();
//# sourceMappingURL=forum.js.map